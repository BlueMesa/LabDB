{% extends "VIBFliesBundle::layout.html.twig" %}
{% import 'VIBFliesBundle:Macros:jquery.html.twig' as jq %}
{% import 'VIBFliesBundle:Macros:show.html.twig' as s %}

{% block content %}
<h1>{% block pheader %}Stock vials{% endblock %}</h1>

<form action="{{ app.request.requestUri }}" method="post" {{ form_enctype(form) }}>

    {% block selector %}{% endblock %}
    
    {{ form_errors(form) }}
    {% if form.items | length < 1 %}
        {{ form_widget(form.items) }}
    {% endif %}

    <table id="vials" class="ui-table">
    {% include 
            'VIBFliesBundle:FlyVial:_vial_table.html.twig'
            with {'vials': vials, 'pager': pager, 'class': null, 'checkbox': true} %}
    {% block pager %}
        {% if pager.nbPages > 1 %}
        <tfoot>
            <tr>
                <td colspan="8">{{ s.pager(pager,'flyvial_listpage') }}</td>
            </tr>
        </tfoot>
        {% endif %}
    {% endblock %}
    </table>
    
    {{ form_rest(form) }}

    {{ jq.button('Expand',path('flyvial_expand'),'ui-icon-copy') }}
    {% block actionbutton %}{{ jq.button('Select vials',path('flyvial_select'),'ui-icon-tag') }}{% endblock %}
    {{ jq.button('Reset',app.request.requestUri,'ui-icon-refresh') }}
    {{ jq.submit_action_button(
            'Flip',
            "$('#FlyVialSelectType_action').val('flip'); $('form').submit();",
            'ui-icon-copy') }}
    {{ jq.submit_action_button(
            'Trash',
            "$('#FlyVialSelectType_action').val('trash'); $('form').submit();",
            'ui-icon-trash') }}
    {{ jq.submit_action_button(
            'Print labels',
            "$('#FlyVialSelectType_action').val('label'); $('form').submit();",
            'ui-icon-print') }}

</form>

{% endblock %}