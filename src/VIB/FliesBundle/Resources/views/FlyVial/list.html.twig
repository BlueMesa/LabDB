{% extends "VIBFliesBundle::layout.html.twig" %}
{% import 'VIBFliesBundle:Macros:jquery.html.twig' as jq %}

{% block content %}
<h1>{{ header }}</h1>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Stock</th>
            <th>Cross</th>
            <th>Setup date</th>
            <th>Flip date</th>
            <th>Flipped from</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
    {% for vial in vials %}
        <tr id="vial_{{ vial }}">
            <td><a href="{{ path('flyvial_show', { 'id': vial.id }) }}">
                {{ vial }}</a></td>
            <td>{% if vial.stock is not empty %}
                <a href="{{ path('flystock_show', { 'id': vial.stock.id }) }}">{{ vial.stock }}</a>
                {% endif %}</td>
            <td>{% if vial.cross is not empty %}
                <a href="{{ path('flycross_show', { 'id': vial.cross.id }) }}">{{ vial.cross }}</a>
                {% endif %}</td>
            <td>{{ vial.setupDate | date("d M Y") }}</td>
            <td>{{ vial.flipDate | date("d M Y") }}</td>
            <td>{% if vial.parent is not empty %}
                <a href="{{ path('flyvial_show', { 'id': vial.parent.id }) }}">
                {{ vial.parent }}
                </a>
                {% endif %}</td>
            <td>{% if vial.trashed %}
                <span style="color: black;">TRASHED</span>
                {% elseif vial.alive %}
                <span style="color: green;">ALIVE</span>
                {% else %}
                <span style="color: red;">DEAD</span>
                {% endif %}

            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{{ jq.button('Select vials',path('flyvial_select'),'ui-icon-tag') }}
{% endblock %}